/*! Snakeskin v7.6.0 (live) | https://github.com/SnakeskinTpl/Snakeskin/blob/master/LICENSE */
(function(){'use strict';
function z(){function I(a){return J[a]}function K(a){return L[a]||a}function k(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function A(a){return"function"===typeof a}function x(a,b){function c(){this.constructor=a}c.prototype=b.prototype;a.prototype=new c}function y(a,b){a=((M.exec(a)||[])[1]||"").trim();return!(!a||!isNaN(Number(a))||(b||N)[a])}var p=void 0,d=p={VERSION:[7,6,0]};p.UID=null;p.j={};p.Filters={};p.Vars={override:function(a){return function(b,
c){return c[a]=b}},ignore:function(a){a.ignore=!0}};p.LocalVars={};p.cache={};Array.isArray=Array.isArray||function(a){return"[object Array]"==={}.call(a)};String.prototype.trim=String.prototype.trim||function(){for(var a=this.replace(/^\s\s*/,""),b=a.length,c=/\s/;c.test(a.charAt(--b)););return a.substring(0,b+1)};d.HTMLObject=function(a,b){this.value=a;this.attr=b};d.StringBuffer=function(){return[]};d.Node=function(){};d.Node.prototype.length=function(){return this.value.childNodes.length};d.Node.prototype.textContent=
function(){return this.value.textContent};d.DocumentFragment=function(a){this.renderMode=a;this.value=document.createDocumentFragment()};x(d.DocumentFragment,d.Node);d.DocumentFragment.prototype.appendChild=function(a){this.value.appendChild(a)};d.DocumentFragment.prototype.textContent=function(){for(var a=this.value.childNodes,b="",c=0;c<a.length;c++)b+=a[c].outerHTML||a[c].textContent;return b};d.Element=function(a,b){this.renderMode=b;this.value=document.createElement(a)};x(d.Element,d.Node);d.Element.prototype.appendChild=
function(a){this.value.appendChild(a)};d.Element.prototype.setAttribute=function(a,b){this.value.setAttribute(a,b)};d.Element.prototype.textContent=function(){return this.value.outerHTML};d.Comment=function(a,b){this.renderMode=b;this.value=document.createComment(a)};x(d.Comment,d.Node);d.Text=function(a,b){this.renderMode=b;this.value=document.createTextNode(a)};x(d.Text,d.Node);d.inlineTags={html:{area:"href",base:"href",br:!0,col:!0,embed:"src",hr:!0,img:"src",input:"value",link:"href",meta:"content",
param:"value",source:"src",track:"src",wbr:!0},xml:{}};d.appendChild=function(a,b,c){!1===b instanceof d.Node&&(b=new d.Text(String(b),c));a&&a.appendChild(b.value);return b};d.setAttribute=function(a,b,c){a.setAttribute(b,c instanceof d.Node?c.textContent():String(c))};var D=/\[native code]/.test(Object.keys&&Object.keys.toString())&&Object.keys;d.forEach=function(a,b){if(a){var c=0;if(Array.isArray(a)){c=a.length;for(var e=0;e<c&&!1!==b(a[e],e,a,{isFirst:0===e,isLast:e===c-1,length:c});e++);}else if(D){e=
D(a);c=e.length;for(var g=0;g<c&&!1!==b(a[e[g]],e[g],a,{i:g,isFirst:0===g,isLast:g===c-1,length:c});g++);}else{if(4<=b.length)for(g in a){if(!a.hasOwnProperty(g))break;c++}g=0;for(e in a){if(!a.hasOwnProperty(e))break;if(!1===b(a[e],e,a,{i:g,isFirst:0===g,isLast:g===c-1,length:c}))break;g++}}}};d.forIn=function(a,b){if(a){var c=0,e=0;if(4<=b.length)for(var g in a)c++;for(var h in a){if(!1===b(a[h],h,a,{i:e,isFirst:0===e,isLast:e===c-1,length:c}))break;e++}}};d.decorate=function(a,b,c){d.forEach(a,
function(e){return c=e(c,b)||c});c.decorators=a;return c};var O=/([\\/'*+?|()[\]{}.^$-])/g,M=/^\(*\s*(.*?)\s*\)*$/,N={"false":!0,"null":!0,"true":!0,undefined:!0},P={stringBuffer:!0,stringConcat:!0},E={"-":!0,":":!0,_:!0},Q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(){function a(c){this.value=c}function b(c){function e(m,n){try{var r=
c[m](n),t=r.value;t instanceof a?Promise.resolve(t.value).then(function(u){e("next",u)},function(u){e("throw",u)}):g(r.done?"return":"normal",r.value)}catch(u){g("throw",u)}}function g(m,n){switch(m){case "return":h.resolve({value:n,done:!0});break;case "throw":h.reject(n);break;default:h.resolve({value:n,done:!1})}(h=h.next)?e(h.key,h.h):l=null}var h,l;this.g=function(m,n){return new Promise(function(r,t){r={key:m,h:n,resolve:r,reject:t,next:null};l?l=l.next=r:(h=l=r,e(m,n))})};"function"!==typeof c.return&&
(this.return=void 0)}"function"===typeof Symbol&&Symbol.asyncIterator&&(b.prototype[Symbol.asyncIterator]=function(){return this});b.prototype.next=function(c){return this.g("next",c)};b.prototype.throw=function(c){return this.g("throw",c)};b.prototype.return=function(c){return this.g("return",c)};return{wrap:function(c){return function(){return new b(c.apply(this,arguments))}},l:function(c){return new a(c)}}})();var q;p={};k(p,"///","///");k(p,"/*","/*");k(p,"*/","*/");var F=k({"-":!0},"#",!0);d.forEach(F,
function(){return!0});p={"\\":!0,'"':!0,"'":!0,"/":!0};k(p,"`",!0);k(p,"{",!0);k(p,"/",!0);k(p,"/",!0);var R=(q={"\\":!0},k(q,"`",!0),k(q,"{",!0),k(q,"#",!0),k(q,"/",!0),k(q,"/",!0),k(q,"&",!0),k(q,".",!0),k(q,"|",!0),k(q,":",!0),q);d.forEach(F,function(a,b){return R[b.charAt(0)]=!0});q={"\\":!0};k(q,"`",!0);k(q,"/",!0);k(q,"/",!0);k({"\\":!0},"$",!0);var S=[];d.forEach(E,function(a,b){S.push(b.replace(O,"\\$1"))});var G=/([^\s=]+)/,f=d.Filters;d.importFilters=function(a,b){var c=f;b&&d.forEach(b.split("."),
function(e){c[e]=c[e]||{};c=c[e]});d.forEach(a,function(e,g){return c[g]=e});return this};d.setFilterParams=function(a,b){function c(h,l){for(var m,n=arguments.length,r=Array(2<n?n-2:0),t=2;t<n;t++)r[t-2]=arguments[t];if(h&&A(l)&&h instanceof l){var u;h.value=(u=g).call.apply(u,[this,h.value].concat(r));return h}return(m=g).call.apply(m,[this,h].concat(r))}var e=b.safe;e&&(b.bind=["Unsafe"].concat(b.bind||[]));var g=void 0;if("string"===typeof a)return e&&(g=f[a],f[a]=c),f[a]=f[a]||function(h){return h},
f[a].ssFilterParams=b,f[a];e&&(g=a,a=c);a.ssFilterParams=b;return a};f.console={dir:function(a){var b;(b=console).dir.apply(b,arguments);return a},error:function(a){var b;(b=console).error.apply(b,arguments);return a},info:function(a){var b;(b=console).info.apply(b,arguments);return a},log:function(a){var b;(b=console).log.apply(b,arguments);return a},table:function(a){var b;(b=console).table.apply(b,arguments);return a},warn:function(a){var b;(b=console).warn.apply(b,arguments);return a}};var L=
{'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;"},T=/[<>"'/]|&(?!#|[a-z]+;)/g,J={"&#39;":"'","&#x2F;":"/","&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'},U=/&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;/g;f.html=function(a,b,c,e,g){return!a||a instanceof d.Node?a:a instanceof d.HTMLObject?(d.forEach(a.value,function(h,l,m){a.attr?e[l]=m[l]=h[0]!==g?[f.html(h[0],b,a.attr,e,g)]:h:m[l]=f.html(h,b)}),a):A(b)&&a instanceof b?a.value:String(c?f[c](a):a).replace(T,K)};d.setFilterParams("html",{bind:["Unsafe",
"$attrType",function(a){return a.getVar("$attrs")},"TRUE"],test:function(a){return y(a)}});f.htmlObject=function(a){return a instanceof d.HTMLObject?"":a};d.setFilterParams("htmlObject",{test:function(a){return y(a)}});f.undef=function(a){return void 0!==a?a:""};d.setFilterParams("undef",{test:function(a){return y(a,{"false":!0,"null":!0,"true":!0})}});f.uhtml=function(a){return String(a).replace(U,I)};var V=/<\/?[^>]+>/g;f.stripTags=function(a){return String(a).replace(V,"")};var W=/%5B/g,X=/%5D/g;
f.uri=function(a){return encodeURI(String(a)).replace(W,"[").replace(X,"]")};d.setFilterParams("uri",{safe:!0});f.upper=function(a){return String(a).toUpperCase()};d.setFilterParams("upper",{safe:!0});f.ucfirst=function(a){a=String(a);return a.charAt(0).toUpperCase()+a.slice(1)};d.setFilterParams("ucfirst",{safe:!0});f.lower=function(a){return String(a).toLowerCase()};d.setFilterParams("lower",{safe:!0});f.lcfirst=function(a){a=String(a);return a.charAt(0).toLowerCase()+a.slice(1)};d.setFilterParams("lcfirst",
{safe:!0});f.trim=function(a){return String(a).trim()};d.setFilterParams("trim",{safe:!0});var Y=/\s{2,}/g;f.collapse=function(a){return String(a).replace(Y," ").trim()};d.setFilterParams("collapse",{safe:!0});f.truncate=function(a,b,c,e){a=String(a);if(!a||a.length<=b)return a;a=a.slice(0,b-1);b=a.length;for(var g=void 0;b--&&c;)if(" "===a.charAt(b))g=b;else if(void 0!==g)break;return(void 0!==g?a.slice(0,g):a)+(e?"&#8230;":"\u2026")};f.repeat=function(a,b){return Array(null!=b?b+1:3).join(a)};d.setFilterParams("repeat",
{safe:!0});f.remove=function(a,b){return String(a).replace(b,"")};f.replace=function(a,b,c){return String(a).replace(b,c)};var Z=/\${(.*?)}/g;f.tpl=function(a,b){return String(a).replace(Z,function(c,e){return e in b?b[e]:""})};f.json=function(a){return JSON.stringify(a)};f.string=function(a){return"object"===("undefined"===typeof a?"undefined":Q(a))&&!1===a instanceof String?JSON.stringify(a):String(a)};f.parse=function(a){return"string"===typeof a?JSON.parse(a):a};f["default"]=function(a,b){return void 0===
a?b:a};d.setFilterParams("default",{"!undef":!0});var aa=/\r?\n|\n/g;f.nl2br=function(a,b,c,e,g){a=a.split(aa);for(var h="",l=0;l<a.length;l++){var m=a[l],n=l===a.length-1;e||P[c]?(h+=f.html(m),n||(h+="<br"+("xml"===g?"/":"")+">")):(d.appendChild(b,m,c),n||d.appendChild(b,new d.Element("br",c),c))}return h};d.setFilterParams("nl2br",{"!html":!0,bind:["$0",function(a){return"'"+a.renderMode+"'"},function(a){return a.stringResult},"$0",function(a){return"'"+a.doctype+"'"}]});f.attrKey=function(a){return(a=
G.exec(String(a)))&&a[1]||"undefined"};f.attrKeyGroup=function(a){return(a=G.exec(String(a)))&&a[1]||""};var ba=/(javascript)(:|;)/g;f.attrValue=function(a){return String(a).replace(ba,"$1&#31;$2")};f.attr=function(a,b,c,e,g,h,l){function m(r,t){t=t||"";d.forEach(r,function(u,v){if(u!==l){if(u&&u.constructor===Object)return v=f.attrKeyGroup(v),m(u,t+(!v.length||E[v.slice(-1)]?v:v+"-"));v=t+v;for(var B=v[0].toLowerCase(),C=1;C<v.length;C++){var w=v.charAt(C),H=w.toUpperCase();H===w&&H!==w.toLowerCase()?
B+="-"+w:B+=w}v=B.toLowerCase();g[v]=n[v]=[u]}});return new d.HTMLObject(n,"attrValue")}if("attrKey"!==e||!a||a.constructor!==Object)return A(b)&&a instanceof b?a:String(a);var n={};return m(a)};d.setFilterParams("attr",{"!html":!0,bind:["Unsafe",function(a){return"'"+a.doctype+"'"},"$attrType",function(a){return a.getVar("$attrs")},"TRUE","FALSE"],test:function(a){return y(a)}});f["super"]=function(a,b,c,e){b=b.templates=b.templates||{};c+=a;b[c]=b[c]||[a];if(e)return b[c].slice(-2)[0]||a;a+=Math.random().toString().slice(2);
b[c].push(a);return a};d.setFilterParams("super",{"!html":!0,bind:[function(a){return a.getVar("__STORE__")},function(a){return JSON.stringify(a.scope[0])},function(a){return!!a.vars[a.tplName]}]});return d}"object"===typeof exports&&"undefined"!==typeof module?module.exports=z():"function"===typeof define&&define.amd?define("Snakeskin",z):this.Snakeskin=z();
}).call(this);
