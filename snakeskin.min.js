var Snakeskin={VERSION:"2.0",Directions:{},Filters:{},BEM:{},Vars:{},write:{},cache:{}},SS=Snakeskin;
(function(n){Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});String.prototype.trim||(String.prototype.trim=function(){for(var a=this.replace(/^\s\s*/,""),c=a.length;/\s/.test(a.charAt(--c)););return a.substring(0,c+1)});Snakeskin.forEach=function(a,c){var b=-1,d,e;if(Array.isArray(a))for(d=a.length;++b<d;)c(a[b],b,0===b,b===d-1,d);else{b=0;for(e in a)a.hasOwnProperty(e)&&b++;d=b;b=-1;for(e in a)a.hasOwnProperty(e)&&(b++,c(a[e],e,b,0===b,b===d-
1,d))}};var C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},D=/[&<>"'\/]/g,E=function(a){return C[a]};Snakeskin.Filters.html=function(a){return String(a).replace(D,E)};Snakeskin.Filters.undef=function(a){return"undefined"!==typeof a?a:""};var F={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"},G=/&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;/g,H=function(a){return F[a]};Snakeskin.Filters.uhtml=function(a){return String(a).replace(G,H)};var I=/<\/?[^>]+>/g;
Snakeskin.Filters.stripTags=function(a){return String(a).replace(I,"")};var J=/%5B/g,K=/%5D/g;Snakeskin.Filters.uri=function(a){return encodeURI(String(a)).replace(J,"[").replace(K,"]")};Snakeskin.Filters.upper=function(a){return String(a).toUpperCase()};Snakeskin.Filters.ucfirst=function(a){a=String(a);return a.charAt(0).toUpperCase()+a.substring(1)};Snakeskin.Filters.lower=function(a){return String(a).toLowerCase()};Snakeskin.Filters.lcfirst=function(a){a=String(a);return a.charAt(0).toLowerCase()+
a.substring(1)};Snakeskin.Filters.trim=function(a){return String(a).trim()};var L=/\s{2,}/g;Snakeskin.Filters.collapse=function(a){return String(a).replace(L," ").trim()};Snakeskin.Filters.truncate=function(a,c,b){a=String(a);if(!a||a.length<=c)return a;a=a.substring(0,c-1);var d;for(c=a.length;c--&&b;)if(" "===a.charAt(c))d=c;else if("undefined"!==typeof d)break;return("undefined"!==typeof d?a.substring(0,d):a)+"\u2026"};Snakeskin.Filters.repeat=function(a,c){return Array(c||2).join(a)};Snakeskin.Filters.remove=
function(a,c){return String(a).replace(c,"")};Snakeskin.Filters.replace=function(a,c,b){return String(a).replace(c,b)};Array.prototype.forEach||(Array.prototype.forEach=function(a,c){var b=-1,d=this.length;if(c)for(;++b<d;)a.call(c,this[b],b,this);else for(;++b<d;)a(this[b],b,this)});Array.prototype.some||(Array.prototype.some=function(a,c){var b=-1,d=this.length,e;if(c)for(;++b<d;){if(e=a.call(c,this[b],b,this))return!0}else for(;++b<d;)if(e=a(this[b],b,this))return!0;return!1});Array.prototype.reduce||
(Array.prototype.reduce=function(a,c){var b=0,d=this.length,e;if(1===d)return this[0];for(e="undefined"!==typeof c?c:this[0];++b<d;)e=a(e,this[b],b,this);return e});var p={},s={},t={},z={},u={},A={},v={},l={},q={},w=[],M={'"':!0,"'":!0};Snakeskin._escape=function(a,c){return a.replace(/(["']).*?[^\\]\1/g,function(a){c&&c.push(a);return"__SNAKESKIN_QUOT__"+(c?c.length-1:"_")})};Snakeskin._uescape=function(a,c){return a.replace(/__SNAKESKIN_QUOT__(\d+)/g,function(a,d){return c[d]})};Snakeskin._getExtStr=
function(a,c){if("undefined"===typeof p[q[a]])throw error=Error('The specified pattern ("'+q[a]+'" for "'+a+'") for inheritance is not defined ('+this._genErrorAdvInfo(c)+")!"),error.name="Snakeskin Error",error;for(var b=q[a],d=p[b],e,j,h,f,g=-1,m,k=0,x=[],y,B,l;6>++g;)for(f in 0===g?(e=s[a],j=s[b]):2===g?(e=u[a],j=u[b],k=A[b],m=null):4===g&&(e=t[a],j=t[b],k=z[b],m=null),e)if(e.hasOwnProperty(f))if(l=0,h=p[a].substring(e[f].from,e[f].to),j[f]&&(y=h.length-p[b].substring(j[f].from,j[f].to).length),
B=j[f]?j[f].from:k,x.sort(function(a,b){if(a.val>b.val)return 1;if(a.val===b.val)return 0;if(a.val<b.val)return-1}).some(function(a){if(a.val<B)l+=a.adv;else return!0}),j[f]&&0===g%2)1<g&&(m=j[f].from+l+h.length,k+=y,m>k&&(k=m+(4===g?5:1))),d=d.substring(0,j[f].from+l)+h+d.substring(j[f].to+l),x.push({val:j[f].from,adv:y});else if(!j[f])if(1===g)d+="{"+f+"}"+h+"{end}";else if(3===g||5===g)null===m&&(m=k,k+=l),h=3===g?"{"+h+"}":"{"+f+"}"+h+"{end}",d=d.substring(0,k)+h+d.substring(k),x.push({val:m,
adv:h.length}),k+=h.length;return d};Snakeskin._genErrorAdvInfo=function(a){var c,b="";for(c in a)a.hasOwnProperty(c)&&(b=a[c].innerHTML?b+(c+": (class: "+(a[c].className||"undefined")+", id: "+(a[c].id||"undefined")+"), "):b+(c+": "+a[c]+", "));return b.replace(/, $/,"")};Snakeskin.error=function(a){a=Error(a);a.name="Snakeskin Error";return a};Snakeskin.compile=function(a,c,b,d){d=d||{};a.innerHTML&&(d.node=a);a={i:-1,beginI:0,quotContent:[],source:String(a.innerHTML||a).replace(/{cdata}([\s\S]*?){end\s+cdata}/gm,
function(a,b){w.push(b);return"__SNAKESKIN_CDATA__"+(w.length-1)}).replace(/\/\/.*/gm,"").replace(/[\t\v\r\n]/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim(),res:""+(!b?"/* This code is generated automatically, don't alter it. */":"")+(c?"var Snakeskin = global.Snakeskin;exports.liveInit = function (path) { Snakeskin = require(path);exec();return this;};function exec() {":""),save:function(a){this.canWrite&&(this.res+=a)}};for(var e,j=0,h,f="",g,m,k;++a.i<a.source.length;){g=a.source.charAt(a.i);if(!k)if("{"===
g)if(e)j++;else{e=!0;continue}else if("}"===g&&(!j||!j--)){e=!1;m=f.length;f=this._escape(f,a.quotContent).trim();g=f.split(" ")[0];g=this.Directions[g]?g:"const";this.Directions[g].call(this,"const"!==g?f.replace(RegExp("^"+g+"\\s+"),""):g,m,a,{commonJS:c,dryRun:b,info:d});f="";continue}if(e){!a.protoStart&&h&&(a.save("';"),h=!1);if((M[g]||"/"===g)&&(!a.source[a.i-1]||"\\"!==a.source[a.i-1]))k&&k===g?k=!1:k||(k=g);f+=g}else a.protoStart||(h||(a.save("__SNAKESKIN_RESULT__ += '"),h=!0),a.parentName||
a.save(g))}a.res=this._uescape(a.res,a.quotContent).replace(/__SNAKESKIN_ESCAPE__OR/g,"||").replace(/__SNAKESKIN_CDATA__(\d+)/g,function(a,b){return w[b].replace(/\n/gm,"\\n").replace(/\r/gm,"\\r").replace(/\v/gm,"\\v").replace(/'/gm,"&#39;")}).replace(/__SNAKESKIN_RESULT__ \+= '';/g,"");a.res+=!b?"/* Snakeskin templating system. Generated at: "+(new Date).toString()+". */":"";a.res+=c?"}":"";if(b)return a.res;console.log(a.res);return a.res};Snakeskin.Directions.template=function(a,c,b,d){var e,
j,h,f="";b.startI=b.i+1;c=/(.*?)\(/.exec(a)[1];b.tplName=e=this._uescape(c,b.quotContent);if(0!==b.beginI)return this.error("Missing closing or opening tag in the template (command: {"+a+'}, template: "'+e+", "+this._genErrorAdvInfo(d.info)+'")!');b.beginI++;b.canWrite=!1!==this.write[e];b.dryRun||(/\s+extends\s+/.test(a)&&(b.parentName=j=this._uescape(/\s+extends\s+(.*)/.exec(a)[1],b.quotContent)),s[e]={},t[e]={},z[e]=0,u[e]={},A[e]=0,v[e]={},q[e]=j,h=/\((.*?)\)/.exec(a)[1],b.save("/* Snakeskin template: "+
e+"; "+h.replace(/=(.*?)(?:,|$)/g,"")+" */"),/\.|\[/.test(c)||d.commonJS?(c.replace(/\[/g,".").replace(/]/g,"").split(".").reduce(function(a,c,e){nmCache[a]||(b.save("if (typeof "+(opt_commonjs?"exports.":"")+a+" === 'undefined') { "+(opt_commonjs?"exports.":1===e?n?"var ":"window.":"")+a+" = {}; }"),nmCache[a]=!0);return"__SNAKESKIN_QUOT__"===c.substring(0,18)?a+"["+c+"]":a+"."+c}),b.save((opt_commonjs?"exports.":"")+c+"= function (")):b.save((!n?"window."+c+" = ":"")+"function "+(n?c:"")+"("),h=
h.split(","),l[e]=l[j]?l[j].concat(h):h,l[j]&&l[j].forEach(function(a){var b=a.split("=");b[0]=b[0].trim();b[1]=b[1]&&b[1].trim();h.forEach(function(c,e){var d=c.split("=");d[0]=d[0].trim();d[1]=d[1]&&d[1].trim();b[0]===d[0]&&"undefined"===typeof d[1]&&(h[e]=a)})}),h.forEach(function(a,c){var d=a.split("=");d[0]=d[0].trim();b.save(d[0]);1<d.length&&(l[j]&&!f&&l[j].forEach(function(a){var b=a.split("=");b[0]=b[0].trim();b[1]=b[1]&&b[1].trim();!h.some(function(a){a=a.split("=");a[0]=a[0].trim();a[1]=
a[1]&&a[1].trim();return a[0]===b[0]})&&"undefined"!==typeof b[1]&&(f+="var "+b[0]+" = "+b[1]+";",v[e][b[0]]=a)}),d[1]=d[1].trim(),f+=d[0]+" = typeof "+d[0]+" !== 'undefined' && "+d[0]+" !== null ? "+d[0]+" : "+d[1]+";");v[e][d[0]]=a;c!==h.length-1&&b.save(",")}),b.save(") { "+f+"var __SNAKESKIN_RESULT__ = '';"))};Snakeskin.Directions["const"]=function(){};var r;if(n)for(r in Snakeskin)Snakeskin.hasOwnProperty(r)&&(exports[r]=Snakeskin[r])})("undefined"===typeof window);
