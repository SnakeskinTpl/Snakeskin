var Snakeskin={VERSION:"2.0.2",Directions:{},Filters:{},BEM:{},Vars:{},write:{},cache:{}};
(function(s){Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});String.prototype.trim||(String.prototype.trim=function(){for(var a=this.replace(/^\s\s*/,""),c=a.length;/\s/.test(a.charAt(--c)););return a.substring(0,c+1)});Snakeskin.forEach=function(a,c){var b=-1,d,e;if(Array.isArray(a))for(d=a.length;++b<d&&!1!==c(a[b],b,0===b,b===d-1,d););else{b=0;for(e in a)a.hasOwnProperty(e)&&b++;d=b;b=-1;for(e in a)if(a.hasOwnProperty(e)&&(b++,!1===c(a[e],
e,b,0===b,b===d-1,d)))break}};var E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},F=/[&<>"'\/]/g,G=function(a){return E[a]};Snakeskin.Filters.html=function(a){return String(a).replace(F,G)};Snakeskin.Filters.undef=function(a){return"undefined"!==typeof a?a:""};var H={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"},I=/&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;/g,J=function(a){return H[a]};Snakeskin.Filters.uhtml=function(a){return String(a).replace(I,J)};
var K=/<\/?[^>]+>/g;Snakeskin.Filters.stripTags=function(a){return String(a).replace(K,"")};var L=/%5B/g,M=/%5D/g;Snakeskin.Filters.uri=function(a){return encodeURI(String(a)).replace(L,"[").replace(M,"]")};Snakeskin.Filters.upper=function(a){return String(a).toUpperCase()};Snakeskin.Filters.ucfirst=function(a){a=String(a);return a.charAt(0).toUpperCase()+a.substring(1)};Snakeskin.Filters.lower=function(a){return String(a).toLowerCase()};Snakeskin.Filters.lcfirst=function(a){a=String(a);return a.charAt(0).toLowerCase()+
a.substring(1)};Snakeskin.Filters.trim=function(a){return String(a).trim()};var N=/\s{2,}/g;Snakeskin.Filters.collapse=function(a){return String(a).replace(N," ").trim()};Snakeskin.Filters.truncate=function(a,c,b){a=String(a);if(!a||a.length<=c)return a;a=a.substring(0,c-1);var d;for(c=a.length;c--&&b;)if(" "===a.charAt(c))d=c;else if("undefined"!==typeof d)break;return("undefined"!==typeof d?a.substring(0,d):a)+"\u2026"};Snakeskin.Filters.repeat=function(a,c){return Array(c||2).join(a)};Snakeskin.Filters.remove=
function(a,c){return String(a).replace(c,"")};Snakeskin.Filters.replace=function(a,c,b){return String(a).replace(c,b)};Snakeskin.Filters.json=function(a){return JSON.stringify(a)};Array.prototype.reduce||(Array.prototype.reduce=function(a,c){var b=0,d=this.length,e;if(1===d)return this[0];for(e="undefined"!==typeof c?c:this[0];++b<d;)e=a(e,this[b],b,this);return e});var t={},n={},m={},v={},C={},p={},w={},u={},q={},x={},z=[],O={'"':!0,"'":!0},P={__SNAKESKIN_RESULT__:!0,__SNAKESKIN_CDATA__:!0};Snakeskin._escape=
function(a,c){return a.replace(/(["']).*?[^\\]\1/g,function(a){c&&c.push(a);return"__SNAKESKIN_QUOT__"+(c?c.length-1:"_")})};Snakeskin._uescape=function(a,c){return a.replace(/__SNAKESKIN_QUOT__(\d+)/g,function(a,d){return c[d]})};Snakeskin._getExtStr=function(a,c){if("undefined"===typeof t[x[a]])throw this.error('The specified pattern ("'+x[a]+'" for "'+a+'") for inheritance is not defined ('+this._genErrorAdvInfo(c)+")!");for(var b=x[a],d=t[b],e,f,h,g,j=-1,l,k=0,A=[],B,D,r;6>++j;)for(g in 0===j?
(e=n[a],f=n[b]):2===j?(e=p[a],f=p[b],k=w[b],l=null):4===j&&(e=m[a],f=m[b],k=v[b],l=null),e)if(e.hasOwnProperty(g))if(r=0,h=t[a].substring(e[g].from,e[g].to),f[g]&&(B=h.length-t[b].substring(f[g].from,f[g].to).length),D=f[g]?f[g].from:k,this.forEach(A.sort(function(a,b){if(a.val>b.val)return 1;if(a.val===b.val)return 0;if(a.val<b.val)return-1}),function(a){if(a.val<D)r+=a.adv;else return!1}),f[g]&&0===j%2)1<j&&(l=f[g].from+r+h.length,k+=B,l>k&&(k=l+(4===j?5:1))),d=d.substring(0,f[g].from+r)+h+d.substring(f[g].to+
r),A.push({val:f[g].from,adv:B});else if(!f[g])if(1===j)d+="{block "+g+"}"+h+"{end}";else if(3===j||5===j)null===l&&(l=k,k+=r),h=3===j?"{"+h+"}":"{proto "+g+"}"+h+"{end}",d=d.substring(0,k)+h+d.substring(k),A.push({val:l,adv:h.length}),k+=h.length;return d};Snakeskin._genErrorAdvInfo=function(a){var c,b="";for(c in a)a.hasOwnProperty(c)&&(b=a[c].innerHTML?b+(c+": (class: "+(a[c].className||"undefined")+", id: "+(a[c].id||"undefined")+"), "):b+(c+": "+a[c]+", "));return b.replace(/, $/,"")};Snakeskin.error=
function(a){a=Error(a);a.name="Snakeskin Error";return a};Snakeskin.compile=function(a,c,b,d){d=d||{};a.innerHTML&&(d.node=a);a={i:-1,openBlockI:0,nmCache:{},posCache:{},sysPosCache:{},backHashI:0,backHash:{},lastBack:null,quotContent:[],source:String(a.innerHTML||a).replace(/{cdata}([\s\S]*?){end\s+cdata}/gm,function(a,b){z.push(b);return"__SNAKESKIN_CDATA__"+(z.length-1)}).replace(/\/\/.*/gm,"").replace(/[\t\v\r\n]/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim(),res:""+(!b?"/* This code is generated automatically, don't alter it. */":
"")+(c?"var Snakeskin = global.Snakeskin;exports.liveInit = function (path) { Snakeskin = require(path);exec();return this;};function exec() {":""),save:function(a){if(!this.tplName||!1!==Snakeskin.write[this.tplName])this.res+=a},replace:function(a){this.canWrite&&(this.res=a)},pushPos:function(a,b,c){c?(this.sysPosCache[a]||(this.sysPosCache[a]=[]),this.sysPosCache[a].push(b)):(this.posCache[a]||(this.posCache[a]=[]),this.posCache[a].push(b))},popPos:function(a){return this.sysPosCache[a]?this.sysPosCache[a].pop():
this.posCache[a].pop()},getPos:function(a){return this.sysPosCache[a]?this.sysPosCache[a]:this.posCache[a]},hasPos:function(a){return this.sysPosCache[a]?this.sysPosCache[a].length:!(!this.posCache[a]||!this.posCache[a].length)},getLastPos:function(a){if(this.sysPosCache[a]){if(this.sysPosCache[a].length)return this.sysPosCache[a][this.sysPosCache[a].length-1]}else if(this.posCache[a]&&this.posCache[a].length)return this.posCache[a][this.posCache[a].length-1]},isNotSysPos:function(a){var b=this,c=
!0;Snakeskin.forEach(this.sysPosCache,function(e,d){if((e=b.getLastPos(d))&&("undefined"!==typeof e.i&&e.i===a||e===a))return c=!1});return c}};for(var e,f=0,h,g="",j,l,k;++a.i<a.source.length;){j=a.source.charAt(a.i);if(!k)if("{"===j)if(e)f++;else{e=!0;continue}else if("}"===j&&(!f||!f--)){e=!1;l=g.length;g=this._escape(g,a.quotContent).trim();j=g.split(" ")[0];j=this.Directions[j]?j:"const";g=this.Directions[j].call(this,"const"!==j?g.replace(RegExp("^"+j+"\\s+"),""):g,l,a,{commonJS:c,dryRun:b,
info:d});!1===g&&(h=e=!1);g="";continue}if(e){!a.protoStart&&h&&(a.save("';"),h=!1);if((O[j]||"/"===j)&&(!a.source[a.i-1]||"\\"!==a.source[a.i-1]))k&&k===j?k=!1:k||(k=j);g+=j}else a.protoStart||(h||(a.save("__SNAKESKIN_RESULT__ += '"),h=!0),a.parentTplName||a.save(j))}a.res=this._uescape(a.res,a.quotContent).replace(/__SNAKESKIN_ESCAPE__OR/g,"||").replace(/__SNAKESKIN_CDATA__(\d+)/g,function(a,b){return z[b].replace(/\n/gm,"\\n").replace(/\r/gm,"\\r").replace(/\v/gm,"\\v").replace(/'/gm,"&#39;")}).replace(/__SNAKESKIN_RESULT__ \+= '';/g,
"");a.res+=!b?"/* Snakeskin templating system. Generated at: "+(new Date).toString()+". */":"";a.res+=c?"}":"";if(b)return a.res;s?c?eval(a.res):global.eval(a.res):window.eval(a.res);return a.res};Snakeskin.Directions.template=function(a,c,b,d){var e=this,f,h,g,j="";b.startI=b.i+1;c=/(.*?)\(/.exec(a)[1];b.tplName=f=this._uescape(c,b.quotContent);if(0!==b.openBlockI)throw this.error("Missing closing or opening tag in the template (command: {"+a+'}, template: "'+f+", "+this._genErrorAdvInfo(d.info)+
'")!');b.openBlockI++;d.dryRun||(/\s+extends\s+/.test(a)&&(b.parentTplName=h=this._uescape(/\s+extends\s+(.*)/.exec(a)[1],b.quotContent)),n[f]={},m[f]={},v[f]=0,p[f]={},w[f]=0,u[f]={},x[f]=h,g=/\((.*?)\)/.exec(a)[1],b.save("/* Snakeskin template: "+f+"; "+g.replace(/=(.*?)(?:,|$)/g,"")+" */"),/\.|\[/.test(c)||d.commonJS?(c.replace(/\[/g,".").replace(/]/g,"").split(".").reduce(function(a,c,e){b.nmCache[a]||(b.save("if (typeof "+(d.commonJS?"exports.":"")+a+" === 'undefined') { "+(d.commonJS?"exports.":
1===e?s?"var ":"window.":"")+a+" = {}; }"),b.nmCache[a]=!0);return"__SNAKESKIN_QUOT__"===c.substring(0,18)?a+"["+c+"]":a+"."+c}),b.save((d.commonJS?"exports.":"")+c+"= function (")):b.save((!s?"window."+c+" = ":"")+"function "+(s?c:"")+"("),g=g.split(","),q[f]=q[h]?q[h].concat(g):g,q[h]&&this.forEach(q[h],function(a){var b=a.split("=");b[0]=b[0].trim();b[1]=b[1]&&b[1].trim();e.forEach(g,function(c,e){var d=c.split("=");d[0]=d[0].trim();d[1]=d[1]&&d[1].trim();b[0]===d[0]&&"undefined"===typeof d[1]&&
(g[e]=a)})}),this.forEach(g,function(a,c){var d=a.split("=");d[0]=d[0].trim();b.save(d[0]);1<d.length&&(q[h]&&!j&&e.forEach(q[h],function(a){var b=a.split("="),c;b[0]=b[0].trim();b[1]=b[1]&&b[1].trim();e.forEach(g,function(a){a=a.split("=");a[0]=a[0].trim();a[1]=a[1]&&a[1].trim();if(a[0]===b[0])return c=!0,!1});!c&&"undefined"!==typeof b[1]&&(j+="var "+b[0]+" = "+b[1]+";",u[f][b[0]]=a)}),d[1]=d[1].trim(),j+=d[0]+" = typeof "+d[0]+" !== 'undefined' && "+d[0]+" !== null ? "+d[0]+" : "+d[1]+";");u[f][d[0]]=
a;c!==g.length-1&&b.save(",")}),b.save(") { "+j+"var __SNAKESKIN_RESULT__ = '';"))};Snakeskin.Directions.templateEnd=function(a,c,b,d){var e=b.tplName,f=b.parentTplName,h=b.source,g=b.i,j=b.startI;if(b.backHashI)throw this.error('Proto "'+b.lastBack+'" is not defined (command: {'+a+'}, template: "'+e+", "+this._genErrorAdvInfo(d.info)+'")!');if(!d.dryRun){t[e]=h.substring(j,g-c-1);if(f)return b.source=h.substring(0,j)+this._getExtStr(e,d.info)+h.substring(g-c-1),n[e]={},m[e]={},v[e]=0,p[e]={},w[e]=
0,u[e]={},b.i=j-1,b.openBlockI++,!1===this.write[f]&&(b.res=b.res.replace(RegExp("/\\* Snakeskin template: "+f.replace(/([.\[\]^$])/g,"\\$1")+";[\\s\\S]*?/\\* Snakeskin template\\. \\*/","m"),"")),b.parentTplName=!1;b.save("return __SNAKESKIN_RESULT__; };if (typeof Snakeskin !== 'undefined') {Snakeskin.cache['"+this._uescape(e,b.quotContent).replace(/'/g,"\\'")+"'] = "+(d.commonJS?"exports.":"")+e+";}/* Snakeskin template. */");b.canWrite=!0;b.tplName=null}};Snakeskin.Directions.block=function(a,
c,b,d){c=b.tplName;if(!d.dryRun&&(b.parentTplName&&!b.hasPos("block")&&!b.hasPos("proto")||!b.parentTplName)){if(n[c][a])throw this.error('Block "'+a+'" is already defined (command: {block '+a+'}, template: "'+c+", "+this._genErrorAdvInfo(d.info)+'")!');n[c][a]={from:b.i-b.startI+1}}b.pushPos("block",{name:a,i:++b.openBlockI},!0)};Snakeskin.Directions.blockEnd=function(a,c,b,d){a=b.popPos("block");if(!d.dryRun&&(b.parentTplName&&!b.hasPos("block")&&!b.hasPos("proto")||!b.parentTplName))n[b.tplName][a.name].to=
b.i-b.startI-c-1};Snakeskin.Directions.proto=function(a,c,b,d){c=b.tplName;var e=b.parentTplName;if(!d.dryRun&&(e&&!b.hasPos("block")&&!b.hasPos("proto")||!e)){if(m[c][a])throw this.error('Proto "'+a+'" is already defined (command: {proto'+a+'}, template: "'+c+", "+this._genErrorAdvInfo(d.info)+'")!');m[c][a]={from:b.i-b.startI+1}}b.pushPos("proto",{name:a,i:++b.openBlockI,startI:b.i+1},!0);e||(b.protoStart=!0)};Snakeskin.Directions.protoEnd=function(a,c,b,d){var e=b.tplName;a=b.parentTplName;var f=
b.i,h=b.backHash,g=b.popPos("proto");if(!d.dryRun&&(a&&!b.hasPos("block")&&!b.hasPos("proto")||!a))m[e][g.name].to=f-b.startI-c-1,v[e]=f-b.startI+1;a||(m[e][g.name].body=this.compile("{template "+e+"()}"+b.source.substring(g.startI,f-c-1)+"{end}",null,!0));h[g.name]&&!h[g.name].protoStart&&(this.forEach(h[g.name],function(a){b.replace(b.res.substring(0,a)+m[e][g.name].body+b.res.substring(a))}),delete h[g.name],b.backHashI--);b.hasPos("proto")||(b.protoStart=!1)};Snakeskin.Directions.apply=function(a,
c,b){!b.parentTplName&&!b.hasPos("proto")&&(m[b.tplName][a]?b.save(m[b.tplName][a].body):(b.backHash[a]||(b.backHash[a]=[],b.backHash[a].protoStart=b.protoStart,b.lastBack=a,b.backHashI++),b.backHash[a].push(b.res.length)))};Snakeskin.Directions.forEach=function(a,c,b){b.pushPos("forEach",++b.openBlockI);!b.parentTplName&&!b.protoStart&&(a=a.split("=>"),b.save(a[0]+" && Snakeskin.forEach("+a[0]+", function ("+(a[1]||"")+") {"))};Snakeskin.Directions.forEachEnd=function(a,c,b){b.popPos("forEach");
!b.parentTplName&&!b.protoStart&&b.save("});")};Snakeskin.Directions["if"]=function(a,c,b){b.openBlockI++;!b.parentTplName&&!b.protoStart&&b.save("if ("+a+") {")};Snakeskin.Directions.elseIf=function(a,c,b){!b.parentTplName&&!b.protoStart&&b.save("} else if ("+a+") {")};Snakeskin.Directions["else"]=function(a,c,b){!b.parentTplName&&!b.protoStart&&b.save("} else {")};Snakeskin.Directions["with"]=function(a,c,b){b.pushPos("with",{scope:a,i:++b.openBlockI},!0)};Snakeskin.Directions.withEnd=function(a,
c,b){b.popPos("with")};Snakeskin.Directions["const"]=function(a,c,b,d){var e,f=b.tplName,h=b.parentTplName,g=b.protoStart,j=b.i,l=b.startI;if(!h&&!g&&/console\./.test(a))b.save(a+";");else if(/=(?!=)/.test(a))if(e=a.split("=")[0].trim(),f){if(p[f][e]||u[f][e])throw this.error('Variable "'+e+'" is already defined (command: {'+a+'}, template: "'+f+", "+this._genErrorAdvInfo(d.info)+'")!');if(P[e])throw this.error("Can't declare variable \""+e+'", try another name (command: {'+a+'}, template: "'+f+", "+
this._genErrorAdvInfo(d.info)+'")!');if(b.hasPos("forEach"))throw this.error('Variable "'+e+"\" can't be defined in a loop (command: {"+a+'}, template: "'+f+", "+this._genErrorAdvInfo(d.info)+'")!');p[f][e]={from:j-l-c,to:j-l};w[f]=j-l+1;!h&&!g&&b.save("var "+a+";")}else C[e]=!0,b.save("if (typeof Snakeskin !== 'undefined') { Snakeskin.Vars."+a+"; }");else!h&&!g&&b.save("__SNAKESKIN_RESULT__ += "+this._returnVar(a,b)+";")};Snakeskin._returnVar=function(a,c){var b="",d=!1;this.forEach(a.replace(/\|\|/g,
"__SNAKESKIN_ESCAPE__OR").split("|"),function(a,f){var h,g;0===f?(c.hasPos("with")?(c.pushPos("with",{scope:a},!0),b=c.getPos("with").reduce(function(a,b){return("undefined"===typeof a.scope?a:a.scope)+"."+b.scope}),c.popPos("with")):b=a,b="Snakeskin.Filters.undef("+(!p[c.tplName][b]&&C[b]?"Snakeskin.Vars.":"")+b+")"):(h=a.split(" "),g=h.slice(1),"!html"!==h[0]?b="Snakeskin.Filters['"+h[0]+"']("+b+(g.length?", "+g.join(""):"")+")":d=!0)});return(!d?"Snakeskin.Filters.html(":"")+b+(!d?")":"")};Snakeskin.Directions.cut=
function(a,c,b){a=this._uescape(a,b.quotContent);this.write[a]||(this.write[a]=!1)};Snakeskin.Directions.save=function(a,c,b){this.write[this._uescape(a,b.quotContent)]=!0};Snakeskin.Directions.setBEM=function(a,c,b){a=a.match(/(.*?),\s+(.*)/);this.BEM[a[1]]=(new Function("return {"+this._uescape(a[2],b.quotContent)+"}"))()};Snakeskin.Directions.bem=function(a,c,b){b.pushPos("bem",{i:++b.openBlockI,tag:/\(/g.test(a)?/\((.*?)\)/.exec(a)[1]:null});var d=this;c=b.getLastPos("bem");var e,f;a=c.tag?a.replace(/^.*?\)([\s\S]*)/,
"$1"):a;f=a.trim().split(",");e=f[0];c.original=this.BEM[e]&&this.BEM[e].tag;!b.parentTplName&&!b.protoStart&&(f[0]+="'",a=f.join(","),f=a.split("${"),a="",this.forEach(f,function(c,e){var f;0<e?(f=c.split("}"),a+="\\'' + "+d._returnVar(f[0],b)+" + '\\'"+d._uescape(f.slice(1).join(""),b.quotContent).replace(/\\/g,"\\\\").replace(/('|")/g,"\\$1")):a+=d._uescape(c,b.quotContent).replace(/\\/g,"\\\\").replace(/('|")/g,"\\$1")}),b.save("__SNAKESKIN_RESULT__ += '<"+(c.tag||c.original||"div")+' class="i-bem" data-params="{name: \\\''+
a+"}\">';"))};Snakeskin.Directions.bemEnd=function(a,c,b){a=b.popPos("bem");!b.parentTplName&&!b.protoStart&&b.save("__SNAKESKIN_RESULT__ += '</"+(a.tag||a.original||"div")+">';")};Snakeskin.Directions.end=function(a,c,b,d){b.openBlockI--;var e=this,f=arguments,h=b.openBlockI+1,g;0===b.openBlockI?this.Directions.templateEnd.apply(this,arguments):b.isNotSysPos(h)&&(this.forEach(b.posCache,function(a,c){if((a=b.getLastPos(c))&&("undefined"!==typeof a.i&&a.i===h||a===h))return g=!0,e.Directions[c+"End"].apply(e,
f),!1}),!g&&(!b.parentTplName&&!b.protoStart)&&b.save("};"));this.forEach(b.sysPosCache,function(a,c){if((a=b.getLastPos(c))&&("undefined"!==typeof a.i&&a.i===h||a===h))return e.Directions[c+"End"].apply(e,f),!1})};var y;if(s)for(y in Snakeskin)Snakeskin.hasOwnProperty(y)&&(exports[y]=Snakeskin[y])})("undefined"===typeof window);
