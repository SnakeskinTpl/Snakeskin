var Snakeskin={VERSION:"1.1",Filters:{},cache:{}},SS=Snakeskin;
(function(E){var x;Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});String.prototype.trim||(String.prototype.trim=function(){for(var a=this.replace(/^\s\s*/,""),c=a.length;/\s/.test(a.charAt(c-=1)););return a.substring(0,c+1)});Snakeskin.forEach=function(a,c){var d=-1,b,g;if(Array.isArray(a))for(b=a.length;++d<b;)c(a[d],d,0===d,d===b-1,b);else{d=0;for(g in a)a.hasOwnProperty(g)&&d++;b=d;d=-1;for(g in a)a.hasOwnProperty(g)&&(d++,c(a[g],g,d,0===
d,d===b-1,b))}};var S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},T=/[&<>"'\/]/g,U=function(a){return S[a]};Snakeskin.Filters.html=function(a){return String(a).replace(T,U)};var V={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/"},W=/&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;/g,X=function(a){return V[a]};Snakeskin.Filters.uhtml=function(a){return String(a).replace(W,X)};var Y=/<\/?[^>]+>/g;Snakeskin.Filters.stripTags=function(a){return String(a).replace(Y,
"")};var Z=/%5B/g,$=/%5D/g;Snakeskin.Filters.uri=function(){return encodeURI(String(url)).replace(Z,"[").replace($,"]")};Snakeskin.Filters.upper=function(a){return String(a).toUpperCase()};Snakeskin.Filters.ucfirst=function(a){a=String(a);return a.charAt(0).toUpperCase()+a.substring(1)};Snakeskin.Filters.lower=function(a){return String(a).toLowerCase()};Snakeskin.Filters.lcfirst=function(a){a=String(a);return a.charAt(0).toLowerCase()+a.substring(1)};Snakeskin.Filters.trim=function(a){return String(a).trim()};
var aa=/\s{2,}/g;Snakeskin.Filters.collapse=function(a){return String(a).replace(aa," ").trim()};Snakeskin.Filters.truncate=function(a,c,d){a=String(a);if(!a||a.length<=c)return a;a=a.substring(0,c-1);var b;for(c=a.length;c--&&d;)if(" "===a.charAt(c))b=c;else if("undefined"!==typeof b)break;return("undefined"!==typeof b?a.substr(0,b):a)+"\u2026"};Snakeskin.Filters.repeat=function(a,c){return Array(c||1).join(a)};Snakeskin.Filters.remove=function(a,c){return String(a).replace(c,"")};Snakeskin.Filters.replace=
function(a,c,d){return String(a).replace(c,d)};Array.prototype.forEach||(Array.prototype.forEach=function(a,c){var d=-1,b=this.length;if(c)for(;(d+=1)<b;)a.call(c,this[d],d,this);else for(;(d+=1)<b;)a(this[d],d,this)});Array.prototype.some||(Array.prototype.some=function(a,c){var d=-1,b=this.length,g;if(c)for(;(d+=1)<b;){if(g=a.call(c,this[d],d,this))return!0}else for(;(d+=1)<b;)if(g=a(this[d],d,this))return!0;return!1});Array.prototype.reduce||(Array.prototype.reduce=function(a,c){var d=0,b=this.length,
g;if(1===b)return this[0];for(g="undefined"!==typeof c?c:this[0];(d+=1)<b;)g=a(g,this[d],d,this);return g});var F={},B={},v={},J={},C={},K={},G={},u={},L={},N=[],O={'"':!0,"'":!0},ba={__SNAKESKIN_RESULT__:!0,__SNAKESKIN_TMP_RESULT__:!0,__SNAKESKIN_CDATA__:!0},j;Snakeskin._getExtStr=function(a){if(!F[L[a]])throw j=Error('The specified pattern ("'+L[a]+'" for "'+a+'") for inheritance is not defined!'),j.name="Snakeskin Error",j;for(var c=L[a],d=F[c],b,g,e,f,k=-1,p,m=0,u=[],l,y,q;6>++k;)for(f in 0===
k?(b=B[a],g=B[c]):2===k?(b=C[a],g=C[c],m=K[c],p=null):4===k&&(b=v[a],g=v[c],m=J[c],p=null),b)if(b.hasOwnProperty(f))if(q=0,e=F[a].substring(b[f].from,b[f].to),g[f]&&(l=e.length-F[c].substring(g[f].from,g[f].to).length),y=g[f]?g[f].from:m,u.sort(function(a,b){if(a.val>b.val)return 1;if(a.val===b.val)return 0;if(a.val<b.val)return-1}).some(function(a){if(a.val<y)q+=a.adv;else return!0}),g[f]&&0===k%2)1<k&&(p=g[f].from+q+e.length,m+=l,p>m&&(m=p+(4===k?5:1))),d=d.substring(0,g[f].from+q)+e+d.substring(g[f].to+
q,d.length),u.push({val:g[f].from,adv:l});else if(!g[f])if(1===k)d+="{"+f+"}"+e+"{end}";else if(3===k||5===k)null===p&&(p=m,m+=q),e=3===k?"{"+e+"}":"{"+f+"}"+e+"{end}",d=d.substring(0,m)+e+d.substring(m,d.length),u.push({val:p,adv:e.length}),m+=e.length;return d};Snakeskin._escape=function(a){var c;a=a.split("");a.forEach(function(d,b){if(O[d]){if(!a[b-1]||"\\"!==a[b-1])c&&c===d?c=!1:c||(c=d)}else if(c)switch(d){case "|":a[b]="__SNAKESKIN_ESCAPE__PIPE";break;case "=":a[b]="__SNAKESKIN_ESCAPE__EQUAL";
break;case ",":a[b]="__SNAKESKIN_ESCAPE__COMMA";break;case "(":a[b]="__SNAKESKIN_ESCAPE__BOPEN";break;case ")":a[b]="__SNAKESKIN_ESCAPE__BCLOSE"}});return a=a.join("")};Snakeskin._descape=function(a){return a.replace(/__SNAKESKIN_ESCAPE__PIPE/g,"|").replace(/__SNAKESKIN_ESCAPE__EQUAL/g,"=").replace(/__SNAKESKIN_ESCAPE__COMMA/g,",").replace(/__SNAKESKIN_ESCAPE__BOPEN/g,"(").replace(/__SNAKESKIN_ESCAPE__BCLOSE/g,")")};Snakeskin.compile=function(a,c,d){a=String(a.innerHTML||a).replace(/{cdata}([\s\S]*?){end\s+cdata}/gm,
function(a,b){N.push(b);return"__SNAKESKIN_CDATA__"+(N.length-1)}).replace(/\/\/.*/gm,"").replace(/[\t\v\n\r]*/gm,"").replace(/\/\*[\s\S]*?\*\//g,"");for(var b=""+(!d?"/* This code is generated automatically, don't alter it. */":"")+(c?"var Snakeskin = global.Snakeskin;exports.liveInit = function (path) { Snakeskin = require(path);exec();return this;};function exec() {":""),g,e=null,f,k,p,m,x=0,l=0,y,q=[],w=[],z,s,A=[],H,I=[],P,Q={},h="",M,r,R,n=-1,t,D;++n<a.length;){g=a.charAt(n);if(!D)if("{"===
g)if(m)x++;else{m=!0;continue}else if("}"===g&&(!x||!x--)){m=!1;h=this._escape(h);switch(h.split(" ")[0]){case "template":if(0!==l)throw j=Error('Missing closing or opening tag in the template (template: "'+e+'")!'),j.name="Snakeskin Error",j;l++;t=n+1;e=h.replace(/^template\s+/,"").replace(/\(.*/,"");if(d)break;/\s+extends\s+/.test(h)&&(f=h.replace(/.*?\s+extends\s+(.*)/,"$1"));k=h.replace(/.*?\((.*?)\).*/,"$1");B[e]={};v[e]={};J[e]=0;C[e]={};K[e]=0;G[e]={};L[e]=f;b+="/* Snakeskin template: "+e+
"; "+k.replace(/=(.*?)(?:,|$)/g,"")+" */";/\./.test(e)||c?(e.split(".").reduce(function(a,d,e){Q[a]||(b+="if (typeof "+(c?"exports.":"")+a+" === 'undefined') { "+(c?"exports.":1===e?E?"var ":"window.":"")+a+" = {}; }",Q[a]=!0);return a+"."+d}),b+=(c?"exports.":"")+e+"= function ("):b+=(!E?"window."+e+" = ":"")+"function "+(E?e:"")+"(";k=k.split(",");u[e]=u[f]?u[f].concat(k):k;p="";u[f]&&u[f].forEach(function(a){var b=a.split("=");b[0]=b[0].trim();b[1]=b[1]&&b[1].trim();k.forEach(function(d,e){var c=
d.split("=");c[0]=c[0].trim();c[1]=c[1]&&c[1].trim();b[0]===c[0]&&"undefined"===typeof c[1]&&(k[e]=a)})});k.forEach(function(a,d){var c=a.split("=");c[0]=c[0].trim();b+=c[0];1<c.length&&(u[f]&&!p&&u[f].forEach(function(a){var b=a.split("=");b[0]=b[0].trim();b[1]=b[1]&&b[1].trim();!k.some(function(a){a=a.split("=");a[0]=a[0].trim();a[1]=a[1]&&a[1].trim();return a[0]===b[0]})&&"undefined"!==typeof b[1]&&(p+="var "+b[0]+" = typeof "+b[0]+" !== 'undefined' && "+b[0]+" !== null ? "+b[0]+" : "+b[1]+";",
G[e][b[0]]=a)}),c[1]=c[1].trim(),p+=c[0]+" = typeof "+c[0]+" !== 'undefined' && "+c[0]+" !== null ? "+c[0]+" : "+c[1]+";");G[e][c[0]]=a;d!==k.length-1&&(b+=",")});b+=") { "+p+"var __SNAKESKIN_RESULT__ = '', __SNAKESKIN_TMP_RESULT__;";break;case "if":l++;!f&&!s&&(b+="if ("+h.replace(/^\/?if\s+/,"")+") {");break;case "elseIf":!f&&!s&&(b+="} else if ("+h.replace(/^elseIf\s+/,"")+") {");break;case "else":!f&&!s&&(b+="} else {");break;case "with":A.push({scope:h.replace(/^with\s+/,""),i:++l});break;case "proto":if(!d&&
(f&&!w.length||!f)){if(v[e][h])throw j=Error('Proto "'+h.replace(/^proto\s+/,"")+'" is already defined (template: "'+e+'")!'),j.name="Snakeskin Error",j;v[e][h]={from:n-t+1}}w.push({name:h,i:++l,startI:n+1});f||(s=!0);break;case "apply":if(!f&&!w.length){h=h.replace(/^apply/,"proto");if(!v[e][h])throw j=Error('Proto "'+h.replace(/^proto\s+/,"")+'" is not defined (template: "'+e+'")!'),j.name="Snakeskin Error",j;b+=v[e][h.replace(/^apply/,"proto")].body}break;case "block":if(!d&&(f&&!q.length&&!w.length||
!f)){if(B[e][h])throw j=Error('Block "'+h.replace(/^block\s+/,"")+'" is already defined (template: "'+e+'")!'),j.name="Snakeskin Error",j;B[e][h]={from:n-t+1}}q.push({name:h,i:++l});break;case "forEach":I.push(++l);!f&&!s&&(h=h.replace(/^forEach\s+/,"").split("=>"),b+=h[0]+" && Snakeskin.forEach("+h[0]+", function ("+(h[1]||"")+") {");break;case "end":l--;g=q[q.length-1];z=w[w.length-1];H=A[A.length-1];P=I[I.length-1];if(0===l){if(d)break;F[e]=a.substring(t,n-h.length-1);if(f){a=a.substring(0,t)+
this._getExtStr(e)+a.substring(n-h.length-1,a.length);B[e]={};v[e]={};J[e]=0;C[e]={};K[e]=0;G[e]={};n=t-1;l++;y=m=f=!1;h="";continue}b+="return __SNAKESKIN_RESULT__; }; Snakeskin.cache['"+e+"'] = "+(c?"exports.":"")+e+";";e=null}else if(!f&&(!z||z.i!==l+1)&&(!g||g.i!==l+1)&&(!H||H.i!==l+1))P===l+1?(I.pop(),s||(b+="});")):s||(b+="};");if(g&&g.i===l+1&&(q.pop(),!d&&(f&&!q.length&&!w.length||!f)))B[e][g.name].to=n-t-h.length-1;if(z&&z.i===l+1){w.pop();if(!d&&(f&&!w.length||!f))v[e][z.name].to=n-t-h.length-
1,J[e]=n-t+1;f||(v[e][z.name].body=this.compile("{template "+e+"()}"+a.substring(z.startI,n-h.length-1)+"{end}",null,!0));w.length||(s=!1)}H&&H.i===l+1&&A.pop();break;default:if(!f&&!s&&/console\./.test(h)){b+=h+";";break}if(/=(?!=)/.test(h)){r=h.split("=")[0].trim();if(C[e][r]||G[e][r])throw j=Error('Variable "'+r+'" is already defined (template: "'+e+'")!'),j.name="Snakeskin Error",j;if(ba[r])throw j=Error("Can't declare variable \""+r+'", try another name (template: "'+e+'")!'),j.name="Snakeskin Error",
j;if(I.length)throw j=Error('Variable "'+r+'" can\'t be defined in a loop (template: "'+e+'")!'),j.name="Snakeskin Error",j;C[e][r]={from:n-t-h.length,to:n-t};K[e]=n-t+1;!f&&!s&&(b+="var "+h+";")}else!f&&!s&&(r="",R=1,M=!1,h.split("|").forEach(function(a,b){var c,d;0===b?A.length?(A.push({scope:a}),r=A.reduce(function(a,b){return("undefined"===typeof a.scope?a:a.scope)+"."+b.scope}),A.pop()):r=a:(c=a.split(" "),d=c.slice(1),"!html"!==c[0]?(R++,r="Snakeskin.Filters['"+c[0]+"']("+r+(d.length?", "+d.join(""):
"")+")"):M=!0)}),b+="__SNAKESKIN_TMP_RESULT__ = "+(!M?"Snakeskin.Filters.html(":"")+r+(!M?")":"")+";",b+="__SNAKESKIN_RESULT__ += typeof __SNAKESKIN_TMP_RESULT__ === 'undefined' ? '' : __SNAKESKIN_TMP_RESULT__;")}h="";continue}if(m){!s&&y&&(b+="';",y=!1);if((O[g]||"/"===g)&&(!a[n-1]||"\\"!==a[n-1]))D&&D===g?D=!1:D||(D=g);h+=g}else s||(y||(b+="__SNAKESKIN_RESULT__ += '",y=!0),f||(b+=g))}b=this._descape(b).replace(/__SNAKESKIN_CDATA__(\d+)/g,function(a,b){return N[b].replace(/\n/gm,"\\n").replace(/\r/gm,
"\\r").replace(/\v/gm,"\\v").replace(/\'/gm,"&#39;")}).replace(/__SNAKESKIN_RESULT__ \+= '';/g,"");b+=!d?"/* Snakeskin templating system. Generated at: "+(new Date).toString()+". */":"";b+=c?"}":"";if(0!==l)throw j=Error("Missing closing or opening tag in the template!"),j.name="Snakeskin Error",j;if(d)return b;E?c?eval(b):global.eval(b):window.eval(b);return b};if(E)for(x in Snakeskin)Snakeskin.hasOwnProperty(x)&&(exports[x]=Snakeskin[x])})("undefined"===typeof window);
