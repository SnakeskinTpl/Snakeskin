/**!
 * @status stable
 * @version 1.0.0
 */

Snakeskin.addDirective(
	'__appendLine__',

	null,

	function (command) {
		if (!this.structure.parent) {
			throw this.error('Directive "cdata" can only be used within a "template" or "proto"');
		}

		this.startInlineDir('cdata');
		this.isSimpleOutput();

		this.info.line += parseInt(command);
	}
);

Snakeskin.addDirective(
	'__protoWhile__',

	null,

	function (command) {
		this.startDir();
		if (this.isSimpleOutput()) {
			let i = this.prepareOutput('__I_PROTO__', true);
			protoCache[this.tplName][this.proto.name].i = i;

			this.save(i +
				':while (' + this.prepareOutput(command, true) + ') {'
			);
		}
	}
);