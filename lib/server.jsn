/**!
 * @status stable
 * @version 1.0.0
 */

if (typeof window === 'undefined') {
	let fs = require('fs');
	let path = require('path');
	let jossy = require('jossy');

	Snakeskin.compileFile = function (file, params) {
		var save = params.output || file + '.js',
			commonJS = typeof params.commonJS === 'undefined' ? true : params.commonJS;

		function action(data) {
			fs.writeFileSync(save, Snakeskin.compile(String(data), commonJS, {file: file}));
		}

		if (params.build) {
			jossy.compile(file, null, null, (err, data) => {
				if (err) {
					console.log(err);

				} else {
					action(data);
				}
			});

		} else {
			action(fs.readFileSync(file));
		}
	};
}